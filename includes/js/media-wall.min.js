var wsuMediaWall=wsuMediaWall||{};!function(a,b,c,d,e){"use strict";e.item=b.Model.extend({"default":{mediaID:"",imageSource:"",imageSourceURL:"",imageUserName:""}}),e.item.prototype.sync=function(){return null},e.item.prototype.fetch=function(){return null},e.item.prototype.save=function(){return null}}(window,Backbone,jQuery,_,wsuMediaWall);var wsuMediaWall=wsuMediaWall||{};!function(a,b,c,d,e){"use strict";e.itemView=b.View.extend({template:d.template(c("#media-wall-single-template").html()),render:function(){return this.$el.html(this.template(this.model.attributes)),this}})}(window,Backbone,jQuery,_,wsuMediaWall);var wsuMediaWall=wsuMediaWall||{};!function(a,b,c,d,e){"use strict";e.appView=b.View.extend({el:"#media-wall-curation",events:{"click #submit-media-url":"submitURL","click .item-remove":"removeItem"},addOne:function(a){var b=new e.itemView({model:a});c(".current-media").append(b.render().el)},submitURL:function(a){a.preventDefault();var b=c("#capture-media-url").val();if(c("#capture-media-url").val(""),""!==b){var d,f={action:"wsuwp_media_wall_item",_ajax_nonce:e.nonce,post_id:e.post_id,url:b};c.post(ajaxurl,f,function(a){if(a.success===!1)console.log(a.data);else{if(d=a,0==d.data)return void console.log("empty data received");var b=new e.item({mediaID:d.data.media_id,imageSource:d.data.hosted_image_url,imageSourceURL:d.data.original_share_url,imageUserName:d.data.username});e.app.addOne(b)}})}},removeItem:function(a){var b=c(a.target),d=b.data("media-id");if(void 0===d||""===d)return void console.log("Missing media ID.");var f={action:"wsuwp_media_wall_remove_item",_ajax_nonce:e.nonce,post_id:e.post_id,media_id:d};c.post(ajaxurl,f,function(a){!1===a.success?console.log("Bad removal request received"):b.parent().remove()})}})}(window,Backbone,jQuery,_,wsuMediaWall);var wsuMediaWall=wsuMediaWall||{};!function(a,b){b.app=new b.appView}(window,wsuMediaWall);